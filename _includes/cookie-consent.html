<div id="cookie-consent" class="cookie-consent hidden">
  <div class="cookie-consent-content">
    <p>This site uses cookies to improve your experience and analyze traffic. <a href="#" onclick="toggleDetails()">Learn more</a></p>
    <div id="cookie-details" class="cookie-details hidden">
      <p>We use Google Analytics to understand how visitors interact with our site. You can choose to accept or decline these cookies.</p>
    </div>
    <div class="cookie-buttons">
      <button onclick="acceptCookies()" class="btn-accept">Accept</button>
      <button onclick="declineCookies()" class="btn-decline">Decline</button>
    </div>
  </div>
</div>

<style>
.cookie-consent {
  position: fixed;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  max-width: 400px;
  background: rgba(0, 0, 0, 0.85);
  color: #ccc;
  padding: 12px 16px;
  border-radius: 4px;
  font-size: 12px;
  line-height: 1.3;
  z-index: 1000;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.cookie-consent.hidden {
  display: none;
}

.cookie-consent p {
  margin: 0 0 10px 0;
}

.cookie-details {
  margin: 8px 0;
  padding: 8px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 2px;
  font-size: 11px;
}

.cookie-details.hidden {
  display: none;
}

.cookie-buttons {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.cookie-buttons button {
  padding: 4px 12px;
  border: 1px solid #666;
  border-radius: 2px;
  cursor: pointer;
  font-size: 11px;
  background: #444;
  color: #ccc;
}

.cookie-buttons button:hover {
  background: #555;
  border-color: #777;
}

.cookie-consent a {
  color: #aaa;
  text-decoration: underline;
}

@media (max-width: 480px) {
  .cookie-consent {
    left: 10px;
    right: 10px;
    transform: none;
    max-width: none;
  }
}
</style>

<script>
// Cookie consent management
function setCookie(name, value, days) {
  const expires = new Date();
  expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));
  document.cookie = name + '=' + value + ';expires=' + expires.toUTCString() + ';path=/';
}

function getCookie(name) {
  const nameEQ = name + "=";
  const ca = document.cookie.split(';');
  for(let i = 0; i < ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) === ' ') c = c.substring(1, c.length);
    if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
  }
  return null;
}

function acceptCookies() {
  setCookie('cookie_consent', 'accepted', 365);
  document.getElementById('cookie-consent').classList.add('hidden');
  
  // Initialize Google Analytics
  if (typeof gtag !== 'undefined') {
    gtag('consent', 'update', {
      'analytics_storage': 'granted'
    });
  }
}

function declineCookies() {
  setCookie('cookie_consent', 'declined', 365);
  document.getElementById('cookie-consent').classList.add('hidden');
  
  // Deny Google Analytics
  if (typeof gtag !== 'undefined') {
    gtag('consent', 'update', {
      'analytics_storage': 'denied'
    });
  }
}

function toggleDetails() {
  const details = document.getElementById('cookie-details');
  details.classList.toggle('hidden');
}

// Show consent banner if not already set
document.addEventListener('DOMContentLoaded', function() {
  const consent = getCookie('cookie_consent');
  if (!consent) {
    document.getElementById('cookie-consent').classList.remove('hidden');
  } else if (consent === 'accepted') {
    // User previously accepted, grant consent
    if (typeof gtag !== 'undefined') {
      gtag('consent', 'update', {
        'analytics_storage': 'granted'
      });
    }
  }
});
</script>